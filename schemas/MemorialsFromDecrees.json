{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MemorialsFromDecrees",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "LitCalDecrees": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "[A-Z][A-Za-z]+_Upgrade": {
                    "properties": {
                        "Festivity": {
                            "$ref": "#/definitions/Festivity"
                        },
                        "Metadata": {
                            "$ref": "#/definitions/Metadata"
                        }
                    },
                    "required": [
                        "Festivity",
                        "Metadata"
                    ]
                },
                "[A-Z][A-Za-z]+_Create": {
                    "properties": {
                        "Festivity": {
                            "$ref": "#/definitions/Festivity"
                        },
                        "Metadata": {
                            "$ref": "#/definitions/Metadata"
                        }
                    },
                    "required": [
                        "Festivity",
                        "Metadata"
                    ]
                },
                "[A-Z][A-Za-z]+_NameChange": {
                    "properties": {
                        "Festivity": {
                            "$ref": "#/definitions/Festivity"
                        },
                        "Metadata": {
                            "$ref": "#/definitions/Metadata"
                        }
                    },
                    "required": [
                        "Festivity",
                        "Metadata"
                    ]
                },
                "[A-Z][A-Za-z]+_Doctor": {
                    "properties": {
                        "Festivity": {
                            "$ref": "#/definitions/Festivity"
                        },
                        "Metadata": {
                            "$ref": "#/definitions/Metadata"
                        }
                    },
                    "required": [
                        "Festivity",
                        "Metadata"
                    ]
                }
            }
        },
        "$schema": {
            "type": "string",
            "const": "https://litcal.johnromanodorazio.com/dev/schemas/MemorialsFromDecrees.json"
        }
    },
    "required": [
        "LitCalDecrees"
    ],
    "definitions": {
        "Festivity": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "TAG": {
                    "type": "string"
                },
                "GRADE": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/LitGrade"
                },
                "COMMON": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/LitCommon"
                },
                "CALENDAR": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/Calendar"
                },
                "COLOR": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/LitColor"
                },
                "TYPE": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/LitFeastType"
                },
                "READINGS": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/Readings"
                },
                "MONTH": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/Month"
                },
                "DAY": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/CommonDef.json#/definitions/Day"
                }
            },
            "required": [
                "TAG"
            ],
            "title": "Festivity"
        },
        "Metadata": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "action": {
                    "$ref": "#/definitions/MemorialFromDecreesAction"
                },
                "property": {
                    "type": "string",
                    "enum": [
                        "name",
                        "grade"
                    ]
                },
                "decreeURL": {
                    "$ref": "#/definitions/DecreeURL"
                },
                "decreeLangs": {
                    "$ref": "#/definitions/DecreeLangs"
                },
                "decreeURLS": {
                    "$ref": "#/definitions/DecreeURLS"
                },
                "description": {
                    "type": "string"
                },
                "sinceYear": {
                    "type": "integer"
                },
                "strtotime": {
                    "oneOf": [
                        {
                            "type": "string",
                            "description": "supports PHP strtotime string format"
                        },
                        {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "dayOfTheWeek": {
                                    "type": "string",
                                    "enum": [
                                        "Sunday",
                                        "Monday",
                                        "Tuesday",
                                        "Wednesday",
                                        "Thursday",
                                        "Friday",
                                        "Saturday"
                                    ]
                                },
                                "relativeTime": {
                                    "type": "string",
                                    "enum": [
                                        "before",
                                        "after"
                                    ]
                                },
                                "festivityKey": {
                                    "type": "string",
                                    "description": "Must be a valid key for a festivity in the Universal Calendar"
                                }
                            },
                            "required": [
                                "dayOfTheWeek",
                                "relativeTime",
                                "festivityKey"
                            ]
                        }
                    ]
                }
            },
            "required": [
                "action",
                "decreeURL",
                "description"
            ],
            "title": "Metadata"
        },
        "MemorialFromDecreesAction": {
            "type": "string",
            "enum": [
                "createNew",
                "setProperty",
                "makeDoctor"
            ],
            "title": "MemorialFromDecreesAction"
        },
        "DecreeURL": {
            "type": "string",
            "pattern": "^https?:\\\/\\\/(www|press)\\.vatican\\.va\\\/((roman_curia\\\/congregations\\\/ccdds\\\/documents\\\/[-_%a-z0-9]+)|(content\\\/salastampa\\\/it\\\/bollettino\\\/pubblico\\\/[0-9\\\/]+)|(content\\\/[-_%\\\/a-z0-9]+))\\.(html|pdf)(#[%a-zD]+)?$",
            "title": "DecreeURL"
        },
        "DecreeURLS": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "(de|en|es|fr|it|la|pl|pt)": {
                    "type": "string",
                    "pattern": "^https?:\\\/\\\/(www|press)\\.vatican\\.va\\\/((roman_curia\\\/congregations\\\/ccdds\\\/documents\\\/[-_%a-z0-9]+)|(content\\\/salastampa\\\/it\\\/bollettino\\\/pubblico\\\/[0-9\\\/]+)|(content\\\/[-_%\\\/a-z0-9]+))\\.(html|pdf)(#[%a-zD]+)?$"
                }
            }
        },
        "DecreeLangs": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "de": {
                    "type": "string",
                    "description": "German",
                    "enum": [
                        "de",
                        "ge",
                        "tedeD"
                    ]
                },
                "en": {
                    "type": "string",
                    "description": "English",
                    "enum": [
                        "en",
                        "ingD"
                    ]
                },
                "es": {
                    "type": "string",
                    "description": "Spanish",
                    "enum": [
                        "es",
                        "sp",
                        "spagnD"
                    ]
                },
                "fr": {
                    "type": "string",
                    "description": "French",
                    "enum": [
                        "fr",
                        "francD"
                    ]
                },
                "it": {
                    "type": "string",
                    "description": "Italian",
                    "enum": [
                        "it",
                        "italD"
                    ]
                },
                "la": {
                    "type": "string",
                    "description": "Latin",
                    "enum": [
                        "la",
                        "lat"
                    ]
                },
                "pl": {
                    "type": "string",
                    "description": "Polish",
                    "enum": [
                        "pl"
                    ]
                },
                "pt": {
                    "type": "string",
                    "description": "Portuguese",
                    "enum": [
                        "po",
                        "pt",
                        "portD"
                    ]
                }
            },
            "description": "mapping between two-letter ISO code for a language, and the actual two-letter representation used in the Decree URL",
            "title": "DecreeLangs"
        }
    }
}
