{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/LitCal",
    "definitions": {
        "LitCal": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Settings": {
                    "type": "object",
                    "description": "echoes back the settings that were requested for the generation of this specific liturgical calendar, as feedback to be sure that the requested settings were correctly applied",
                    "additionalProperties": false,
                    "properties": {
                        "Year": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Year"
                        },
                        "CalendarType": {
                            "type": "string",
                            "enum": [
                                "CIVIL",
                                "LITURGICAL"
                            ]
                        },
                        "Epiphany": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Epiphany"
                        },
                        "Ascension": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Ascension"
                        },
                        "CorpusChristi": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/CorpusChristi"
                        },
                        "Locale": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Locale"
                        },
                        "ReturnType": {
                            "type": "string",
                            "enum": [
                                "ICS",
                                "JSON",
                                "XML",
                                "YML"
                            ]
                        },
                        "EternalHighPriest": {
                            "type": "boolean"
                        },
                        "NationalCalendar": {
                            "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Region"
                        },
                        "DiocesanCalendar": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "Year",
                        "Epiphany",
                        "Ascension",
                        "CorpusChristi",
                        "Locale",
                        "ReturnType",
                        "CalendarType",
                        "EternalHighPriest"
                    ]
                },
                "Metadata": {
                    "type": "object",
                    "description": "contains information about the current API version, how and when the current response was produced, and keys of liturgical events that can have precedence over others, useful for further calculations of a local calendar",
                    "additionalProperties": false,
                    "properties": {
                        "Version": {
                            "type": "string",
                            "minLength": 3,
                            "maxLength": 5,
                            "pattern": "^(?:0|[1-9]\\d*)\\.(?:0|[1-9]\\d*)$"
                        },
                        "Timestamp": {
                            "type": "integer",
                            "description": "Certainly cannot be any earlier than the start of the project itself July 26, 2017; we'll set the max to Dec 12th, 9999",
                            "minimum": 1501108382,
                            "maximum": 253402214400
                        },
                        "DateTime": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "RequestHeaders": {
                            "type": "object",
                            "properties": {
                                "Accept": {
                                    "type": "string",
                                    "description": "If present, must contain at least one of the following",
                                    "pattern": "(?:text/html|application/xml|application/json|text/calendar|application/yaml)"
                                },
                                "Accept-Language": {
                                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/AcceptLanguage"
                                },
                                "Host": {
                                    "type": "string",
                                    "const": "litcal.johnromanodorazio.com"
                                },
                                "X-Requested-With": {
                                    "type": "string",
                                    "description": "Will only appear for AJAX requests, and will only ever have a value of XMLHttpRequest",
                                    "const": "XMLHttpRequest"
                                }
                            },
                            "additionalProperties": false
                        },
                        "Solemnities": {
                            "$ref": "#/definitions/DateTimeObjectCollection"
                        },
                        "FeastsMemorials": {
                            "$ref": "#/definitions/DateTimeObjectCollection"
                        }
                    },
                    "required": [
                        "Version",
                        "RequestHeaders",
                        "Solemnities",
                        "FeastsMemorials"
                    ]
                },
                "LitCal": {
                    "type": "object",
                    "description": "the liturgical events that make up the requested Liturgical Calendar for the given year",
                    "patternProperties": {
                        "^[A-Z](?:[A-Z]+_)*[a-zA-Z1-9]+[0-9]{0,2}_vigil$": {
                            "$ref": "#/definitions/FestivityVigil"
                        },
                        "^[A-Z](?:[A-Z]+_)*[a-zA-Z1-9]+[0-9]{0,2}$": {
                            "$ref": "#/definitions/FestivityWithSeason"
                        }
                    },
                    "additionalProperties": false
                },
                "Messages": {
                    "type": "array",
                    "description": "an array containing all of the significant operations done in the calculation of the requested Liturgical Calendar, with links to the Decrees of the Congregation for Divine Worship where applicable. Useful for understanding how or why the calculations were done, and what changes have been applied in the generation of the Calendar for the specific year requested.",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "Settings",
                "Metadata",
                "LitCal",
                "Messages"
            ],
            "examples": [
                {
                    "Settings": {
                        "Year": 1970,
                        "Epiphany": "JAN6",
                        "Ascension": "SUNDAY",
                        "CorpusChristi": "SUNDAY",
                        "CalendarType": "CIVIL",
                        "Locale": "string",
                        "ReturnType": "JSON",
                        "NationalCalendar": "string",
                        "DiocesanCalendar": "string",
                        "EternalHighPriest": true
                    },
                    "Metadata": {
                        "Version": "string",
                        "Timestamp": 1501027200,
                        "DateTime": "2024-05-02T03:32:58.936Z",
                        "RequestHeaders": {
                            "Accept-Language": "it-IT,it;",
                            "Accept": "application/json",
                            "Host": "litcal.johnromanodorazio.com"
                        },
                        "Solemnities": {
                            "Christmas": {
                                "date": "2023-12-25T00:00:00+00:00",
                                "timezone_type": 3,
                                "timezone": "UTC"
                            },
                            "Advent1": {
                                "date": "2023-12-03T00:00:00+00:00",
                                "timezone_type": 3,
                                "timezone": "UTC"
                            }
                        },
                        "FeastsMemorials": {
                            "StStephenProtomartyr": {
                                "date": "2023-12-26T00:00:00+00:00",
                                "timezone_type": 3,
                                "timezone": "UTC"
                            },
                            "StJohnEvangelist": {
                                "date": "2023-12-27T00:00:00+00:00",
                                "timezone_type": 3,
                                "timezone": "UTC"
                            }
                        }
                    },
                    "LitCal": {
                        "Advent1_vigil": {
                            "eventIdx": 1076,
                            "name": "Dominica Prima Adventus Missa in Vigilia",
                            "date": 1701475200,
                            "color": [
                                "purple"
                            ],
                            "colorLcl": [
                                "purpura"
                            ],
                            "type": "mobile",
                            "grade": 7,
                            "gradeLcl": "celebratio altioris ordinis quam sollemnitatis",
                            "displayGrade": "",
                            "common": [],
                            "commonLcl": "",
                            "dayOfTheWeek_ISO8601": 6,
                            "month": 12,
                            "day": 2,
                            "year": 2023,
                            "monthShort": "Dec",
                            "monthLong": "December",
                            "dayOfTheWeekShort": "Sat",
                            "dayOfTheWeekLong": "Saturday",
                            "liturgicalYear": "ANNUM B",
                            "isVigilMass": true,
                            "isVigilFor": "Advent1"
                        },
                        "Advent1": {
                            "eventIdx": 583,
                            "name": "Dominica Prima Adventus",
                            "date": 1701561600,
                            "color": [
                                "purple"
                            ],
                            "colorLcl": [
                                "purpura"
                            ],
                            "type": "mobile",
                            "grade": 7,
                            "gradeLcl": "celebratio altioris ordinis quam sollemnitatis",
                            "displayGrade": "",
                            "common": [],
                            "commonLcl": "",
                            "dayOfTheWeek_ISO8601": 7,
                            "month": 12,
                            "day": 3,
                            "year": 2023,
                            "monthShort": "Dec",
                            "monthLong": "December",
                            "dayOfTheWeekShort": "Sun",
                            "dayOfTheWeekLong": "Sunday",
                            "liturgicalYear": "ANNUM B",
                            "hasVigilMass": true,
                            "hasVesperI": true,
                            "hasVesperII": true,
                            "psalterWeek": 1,
                            "liturgicalSeason": "ADVENT",
                            "liturgicalSeasonLcl": "Tempus Adventus"
                        }
                    },
                    "Messages": [
                        "The Solemnity 'Sancti Ioseph Sponsi Beatæ Mariæ Virginis' falls on Dominica IV in Quadragesima in the year 2023, the celebration has been transferred to the following Monday (20 Martius) as per the <a href=\"http://www.cultodivino.va/content/cultodivino/it/rivista-notitiae/indici-annate/1990/284-285.html\">Decree of the Congregation for Divine Worship</a>.",
                        "'Dominica XVIII «Per Annum»' is superseded by the FESTUM DOMINI 'In Transfiguratione Domini' in the year 2023."
                    ]
                }
            ]
        },
        "DateTimeObjectCollection": {
            "type": "object",
            "patternProperties": {
                "^[A-Z](?:[A-Z]+_)*[a-zA-Z1-9]+(?:0|_vigil)?$": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "date": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "timezone_type": {
                            "type": "integer",
                            "const": 3
                        },
                        "timezone": {
                            "type": "string",
                            "const": "UTC"
                        }
                    }
                }
            }
        },
        "FestivityVigil": {
            "type": "object",
            "properties": {
                "eventIdx": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 2000
                },
                "name": {
                    "type": "string"
                },
                "date": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Timestamp"
                },
                "color": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitColor"
                },
                "colorLcl": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "type": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitFeastType"
                },
                "grade": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitGrade"
                },
                "gradeLcl": {
                    "type": "string"
                },
                "displayGrade": {
                    "type": "string"
                },
                "common": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitCommon"
                },
                "commonLcl": {
                    "type": "string"
                },
                "dayOfTheWeek_ISO8601": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 7
                },
                "month": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 12
                },
                "day": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 31
                },
                "year": {
                    "type": "integer",
                    "minimum": 1969,
                    "maxItems": 9999
                },
                "monthShort": {
                    "type": "string"
                },
                "monthLong": {
                    "type": "string"
                },
                "dayOfTheWeekShort": {
                    "type": "string"
                },
                "dayOfTheWeekLong": {
                    "type": "string"
                },
                "liturgicalYear": {
                    "type": "string"
                },
                "isVigilMass": {
                    "type": "boolean"
                },
                "isVigilFor": {
                    "type": "string"
                }
            },
            "required": [
                "eventIdx",
                "name",
                "date",
                "color",
                "colorLcl",
                "type",
                "grade",
                "displayGrade",
                "common",
                "commonLcl",
                "dayOfTheWeek_ISO8601",
                "month",
                "day",
                "year",
                "monthShort",
                "monthLong",
                "dayOfTheWeekShort",
                "dayOfTheWeekLong",
                "isVigilMass",
                "isVigilFor"
            ],
            "additionalProperties": false
        },
        "FestivityWithSeason": {
            "properties": {
                "eventIdx": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 2000
                },
                "name": {
                    "type": "string"
                },
                "date": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/Timestamp"
                },
                "color": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitColor"
                },
                "colorLcl": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "type": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitFeastType"
                },
                "grade": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitGrade"
                },
                "gradeLcl": {
                    "type": "string"
                },
                "displayGrade": {
                    "type": "string"
                },
                "common": {
                    "$ref": "https://litcal.johnromanodorazio.com/api/dev/schemas/?schema=CommonDef.json#/definitions/LitCommon"
                },
                "commonLcl": {
                    "type": "string"
                },
                "dayOfTheWeek_ISO8601": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 7
                },
                "month": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 12
                },
                "day": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 31
                },
                "year": {
                    "type": "integer",
                    "minimum": 1969,
                    "maxItems": 9999
                },
                "monthShort": {
                    "type": "string"
                },
                "monthLong": {
                    "type": "string"
                },
                "dayOfTheWeekShort": {
                    "type": "string"
                },
                "dayOfTheWeekLong": {
                    "type": "string"
                },
                "liturgicalYear": {
                    "type": "string"
                },
                "liturgicalSeason": {
                    "type": "string",
                    "enum": [
                        "ADVENT",
                        "CHRISTMAS",
                        "LENT",
                        "EASTER_TRIDUUM",
                        "EASTER",
                        "ORDINARY_TIME"
                    ]
                },
                "liturgicalSeasonLcl": {
                    "type": "string"
                },
                "hasVigilMass": {
                    "type": "boolean"
                },
                "hasVesperI": {
                    "type": "boolean"
                },
                "hasVesperII": {
                    "type": "boolean"
                },
                "psalterWeek": {
                    "type": "integer"
                }
            },
            "required": [
                "eventIdx",
                "name",
                "date",
                "color",
                "colorLcl",
                "type",
                "grade",
                "displayGrade",
                "common",
                "commonLcl",
                "dayOfTheWeek_ISO8601",
                "month",
                "day",
                "year",
                "monthShort",
                "monthLong",
                "dayOfTheWeekShort",
                "dayOfTheWeekLong",
                "liturgicalSeason",
                "liturgicalSeasonLcl"
            ],
            "additionalProperties": false
        }
    }
}
